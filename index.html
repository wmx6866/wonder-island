<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥‡å¦™æ¢é™©å²› - è¿›é˜¶ç‰ˆ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #2c3e50;
            color: #ecf0f1;
            text-align: center;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        h1 { color: #f1c40f; text-shadow: 2px 2px 4px #000; }
        .status-bar {
            display: flex;
            justify-content: space-around;
            background: #34495e;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid #7f8c8d;
        }
        .stat-box { font-size: 1.1em; }
        .stat-value { font-weight: bold; color: #e67e22; }
        #game-log {
            background-color: #34495e;
            height: 300px;
            overflow-y: auto;
            border: 2px solid #7f8c8d;
            border-radius: 10px;
            padding: 15px;
            text-align: left;
            margin-bottom: 20px;
            font-size: 0.95em;
            line-height: 1.6;
        }
        .log-entry { margin-bottom: 10px; border-bottom: 1px dashed #555; padding-bottom: 5px; }
        .event-good { color: #2ecc71; }
        .event-bad { color: #e74c3c; }
        .event-mysterious { color: #9b59b6; }
        
        .controls button {
            background-color: #e67e22;
            border: none;
            color: white;
            padding: 12px 24px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 5px;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .controls button:hover { background-color: #d35400; }
        .controls button:disabled { background-color: #95a5a6; cursor: not-allowed; }
        
        /* é“å…·æ æ ·å¼ */
        #inventory {
            margin-top: 15px;
            font-size: 0.9em;
            color: #bdc3c7;
        }
    </style>
</head>
<body>

    <h1>ğŸï¸ å¥‡å¦™æ¢é™©å²›ï¼šæ·±æ¸Šå‘¼å”¤</h1>
    <p>ä½ çš„æ¢é™©é˜Ÿç™»é™†äº†ä¸€åº§æœªçŸ¥çš„å²›å±¿...</p>

    <div class="status-bar">
        <div class="stat-box">â¤ï¸ ä½“åŠ›: <span id="health" class="stat-value">100</span></div>
        <div class="stat-box">ğŸ§  ç†æ™º: <span id="sanity" class="stat-value">100</span></div>
        <div class="stat-box">ğŸ’° è´¢å¯Œ: <span id="score" class="stat-value">0</span></div>
        <div class="stat-box">ğŸ“… å¤©æ•°: <span id="day" class="stat-value">1</span></div>
    </div>

    <div id="game-log">
        <div class="log-entry">æ¢é™©æ—¥å¿— Day 1ï¼šæˆ‘ä»¬è¸ä¸Šäº†æµ·æ»©ï¼Œç©ºæ°”ä¸­å¼¥æ¼«ç€å¤è€è€Œå±é™©çš„æ°”æ¯ã€‚</div>
    </div>

    <div id="inventory">ğŸ’ èƒŒåŒ…: <span id="items">ç©ºç©ºå¦‚ä¹Ÿ</span></div>

    <div class="controls">
        <button onclick="explore('forest')">ğŸŒ² æ¢ç´¢å¯†æ— (æ¶ˆè€—ä½“åŠ›)</button>
        <button onclick="explore('ruins')">ğŸ›ï¸ æ·±å…¥é—è¿¹ (æ¶ˆè€—ç†æ™º)</button>
        <button onclick="rest()">â›º æ‰è¥ä¼‘æ¯ (æ¢å¤çŠ¶æ€)</button>
        <button onclick="useItem()" id="btn-use-item" disabled>ğŸ’Š ä½¿ç”¨æ€¥æ•‘åŒ…</button>
    </div>

    <script>
        let health = 100;
        let sanity = 100;
        let score = 0;
        let day = 1;
        let hasMedkit = false;
        let isGameOver = false;

        const logElement = document.getElementById('game-log');

        // éšæœºäº‹ä»¶åº“
        const forestEvents = [
            { text: "ä½ å‘ç°äº†ä¸€æ ªç¨€æœ‰çš„å‘å…‰å…°èŠ±ï¼Œå°å¿ƒç¿¼ç¿¼åœ°é‡‡æ‘˜ä¸‹æ¥ã€‚", change: { health: -5, sanity: 5, score: 50 }, type: "good" },
            { text: "çªç„¶çªœå‡ºä¸€åªé‡çŒªï¼ä½ å—äº†ä¼¤ï¼Œä½†å‹‰å¼ºå‡»é€€äº†å®ƒã€‚", change: { health: -20, sanity: -5, score: 0 }, type: "bad" },
            { text: "ä½ åœ¨æ ‘æ´é‡Œå‘ç°äº†ä¸€ä¸ªè¢«é—å¼ƒçš„èƒŒåŒ…ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªæ€¥æ•‘åŒ…ï¼", change: { health: -5, sanity: 0, score: 10, item: "medkit" }, type: "good" },
            { text: "æ£®æ—é‡Œèµ·äº†å¤§é›¾ï¼Œä½ åœ¨åŸåœ°è½¬äº†ä¸‰ä¸ªå°æ—¶ï¼Œç²¾ç–²åŠ›ç«­ã€‚", change: { health: -15, sanity: -10, score: 0 }, type: "bad" }
        ];

        const ruinsEvents = [
            { text: "ä½ åœ¨çŸ³ç¢‘ä¸Šè§£è¯»å‡ºäº†å¤ä»£æ–‡å­—ï¼Œè·å¾—äº†çè´µçš„çŸ¥è¯†ã€‚", change: { health: -5, sanity: -15, score: 100 }, type: "mysterious" },
            { text: "ä½ è¯¯è§¦äº†æœºå…³ï¼Œä¸€æ”¯æ¯’ç®­æ“¦ä¼¤äº†ä½ çš„æ‰‹è‡‚ã€‚", change: { health: -25, sanity: -5, score: 0 }, type: "bad" },
            { text: "ä½ å‘ç°äº†ä¸€å°Šçº¯é‡‘çš„å°é›•åƒï¼Œå®ƒçœ‹èµ·æ¥ä»·å€¼è¿åŸï¼", change: { health: -5, sanity: -10, score: 200 }, type: "good" },
            { text: "é»‘æš—ä¸­ä¼¼ä¹æœ‰çœ¼ç›åœ¨ç›¯ç€ä½ ...ä½ æ„Ÿåˆ°æåº¦ææ…Œã€‚", change: { health: 0, sanity: -25, score: 0 }, type: "bad" }
        ];

        function updateStatus() {
            document.getElementById('health').innerText = health;
            document.getElementById('sanity').innerText = sanity;
            document.getElementById('score').innerText = score;
            document.getElementById('day').innerText = day;
            
            // æ›´æ–°èƒŒåŒ…æ˜¾ç¤º
            document.getElementById('items').innerText = hasMedkit ? "æ€¥æ•‘åŒ… x1" : "ç©ºç©ºå¦‚ä¹Ÿ";
            document.getElementById('btn-use-item').disabled = !hasMedkit || isGameOver;

            // æ£€æŸ¥æ¸¸æˆç»“æŸ
            if (health <= 0) {
                log("ğŸ’” ä½“åŠ›è€—å°½ï¼Œä½ å€’åœ¨äº†æ¢é™©çš„é€”ä¸­...", "event-bad");
                endGame("æ­»äº¡");
            } else if (sanity <= 0) {
                log("ğŸ§  ä½ è¢«å²›ä¸Šçš„å¹»è±¡é€¼ç–¯äº†ï¼Œæ¶ˆå¤±åœ¨è¿·é›¾ä¸­...", "event-bad");
                endGame("å‘ç–¯");
            }
        }

        function log(message, type = "") {
            const entry = document.createElement('div');
            entry.className = 'log-entry ' + type;
            entry.innerText = `Day ${day}: ${message}`;
            logElement.prepend(entry); // æ–°æ¶ˆæ¯åœ¨æœ€ä¸Šé¢
        }

        function getRandomEvent(eventList) {
            const randomIndex = Math.floor(Math.random() * eventList.length);
            return eventList[randomIndex];
        }

        function explore(location) {
            if (isGameOver) return;

            day++;
            let event;

            if (location === 'forest') {
                event = getRandomEvent(forestEvents);
            } else if (location === 'ruins') {
                event = getRandomEvent(ruinsEvents);
            }

            // åº”ç”¨äº‹ä»¶ç»“æœ
            health += event.change.health;
            sanity += event.change.sanity;
            score += event.change.score;
            
            // é“å…·é€»è¾‘
            if (event.change.item === "medkit") {
                hasMedkit = true;
                log(event.text + " (è·å¾—é“å…·ï¼šæ€¥æ•‘åŒ…)", event.type);
            } else {
                log(event.text, event.type);
            }

            // é™åˆ¶æ•°å€¼èŒƒå›´
            if (health > 100) health = 100;
            if (sanity > 100) sanity = 100;

            updateStatus();
        }

        function rest() {
            if (isGameOver) return;
            day++;
            const healAmount = 15;
            const sanityAmount = 10;
            health = Math.min(100, health + healAmount);
            sanity = Math.min(100, sanity + sanityAmount);
            
            // ä¼‘æ¯ä¹Ÿæœ‰é£é™©
            if (Math.random() > 0.8) {
                log("æ˜¨æ™šåšäº†ä¸ªå™©æ¢¦ï¼Œä¼‘æ¯æ•ˆæœä¸€èˆ¬ï¼Œè€Œä¸”é£Ÿç‰©è¢«å·äº†ä¸€äº›ã€‚", "event-bad");
                score = Math.max(0, score - 20);
            } else {
                log("ä½ ç”Ÿèµ·ç¯ç«ç¡äº†ä¸ªå¥½è§‰ï¼Œæ„Ÿè§‰ç²¾åŠ›å……æ²›ã€‚", "event-good");
            }
            updateStatus();
        }

        function useItem() {
            if (isGameOver || !hasMedkit) return;
            health = Math.min(100, health + 40);
            hasMedkit = false;
            log("ä½¿ç”¨äº†æ€¥æ•‘åŒ…ï¼Œä¼¤å£å¤„ç†å¾—å¾ˆå®Œç¾ï¼(ä½“åŠ›å¤§é‡æ¢å¤)", "event-good");
            updateStatus();
        }

        function endGame(reason) {
            isGameOver = true;
            let title = reason === "æ­»äº¡" ? "ğŸ’€ æ¢é™©å¤±è´¥" : "ğŸŒ€ æ„å¿—å´©æºƒ";
            let rank = "";
            
            if (score < 100) rank = "åˆçº§æ¢é™©å®¶";
            else if (score < 500) rank = "èµ„æ·±çŒäºº";
            else rank = "ä¼ å¥‡å†’é™©ç‹";

            log(`=== æ¸¸æˆç»“æŸ ===`, "event-mysterious");
            log(`æœ€ç»ˆè¯„ä»·ï¼š${rank} (æ€»åˆ†: ${score})`, "event-mysterious");
            
            // ç¦ç”¨æ‰€æœ‰æŒ‰é’®
            const buttons = document.querySelectorAll('.controls button');
            buttons.forEach(btn => btn.disabled = true);
        }
    </script>
</body>
</html>
